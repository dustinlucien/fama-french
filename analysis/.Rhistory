portfolio = read.csv("2013-01-portfolio-positions.csv")
portfolio <- subset(portfolio, select=c(Symbol, Quantity, Most.Recent.Price, Most.Recent.Value))
positions <- aggregate(Quantity ~ Symbol, data = portfolio, FUN = sum)
prices < aggregate(Most.Recent.Price ~ Symbol, data = portfolio, FUN = max)
prices <- aggregate(Most.Recent.Price ~ Symbol, data = portfolio, FUN = max)
values <- aggregate(Most.Recent.Value ~ Symbol, data = portfolio, FUN = sum)
portfolio <- merge(positions, prices)
portfolio <- merge(portfolio, values)
colnames(portfolio)[1] = 'symbol'
colnames(portfolio)[2] = 'positions'
colnames(portfolio)[3] = 'price'
colnames(portfolio)[4] = 'value'
portfolio
total_value <- sum(portfolio$value)
total_value
? apply
portfolio$weight <- (portfolio$value / total_value)
portfolio
sum(portfolio$weight)
hist.prices <- get.hist.quote("BP", quote="Adj", start="1990-10-30", retclass="zoo")
library(tseries)
hist.prices <- get.hist.quote("BP", quote="Adj", start="1990-10-30", retclass="zoo")
hist.prices
hist.prices
monthly.prices <- aggregate(hist.prices, as.yearmon, tail, 1)
library(zoo)
monthly.prices <- aggregate(hist.prices, as.yearmon, tail, 1)
monthly.prices
r <- diff(log(monthly.prices))
r
monthly.prices
r
r1 <- exp(r)-1
r1
? log
install.packages('performanceanalytics')
2
install.packages('PerformanceAnalytics')
portfolio
portfolio[2]
portfolio[2]$positions
portfolio[,2]$positions
portfolio[,2]
portfolio[2]
portfolio[1,2]
portfolio[2,2]
portfolio[3,2]
portfolio[3]
portfolio[3,]
portfolio[3,]$symbol
portfolio[3,symbol]
portfolio[3,'symbol']
portfolio[3,]$symbol
portfolio[3,2]
portfolio[3,1]
rj
r1
coredata(r1)
ff_returns = read.table("F-F_Research_Data_Factors-monthly.txt")
ff_returns
ff_returns[1]
ff_returns[,1]
ff_returns[1,1]
ff_returns
rj
coredata(r1)
r1
r1[1]
rf[1]
rf
rf = ff_returns[start:stop,5]/100
start = (startyear - 1926.5)*12+startmonth;
# Load FF factor returns
startyear = 1990;
startmonth = 11;
endyear = 2012;
endmonth = 11;
 
start = (startyear - 1926.5)*12+startmonth;
stop = (endyear - 1926.5)*12+endmonth;
 
ff_returns = read.table("F-F_Research_Data_Factors-monthly.txt");
rmrf = ff_returns[start:stop,2]/100;
smb = ff_returns[start:stop,3]/100;
hml = ff_returns[start:stop,4]/100;
rf = ff_returns[start:stop,5]/100;
rf
rf[1]
ff_returns
ff_returns[1
ff_returns[1]
ff_returns[1]
ff_returns[,1]
ff_returns[1,1]
start
ff_returns
rmrf = ff_returns[start:stop, c('Date', 'Mkt-RF')]/100;
ff_returns = read.table("F-F_Research_Data_Factors.txt");
ff_returns = read.table("F-F_Research_Data_Factors.txt");
ff_returns
ff_returns[2]
ff_returns[1:10, 2]
ff_returns[1, ]
quit();
